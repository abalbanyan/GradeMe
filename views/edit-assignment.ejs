<%- include partials/header.ejs %>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-3"></div>        
        <div class="col-md-6">
            <h2>  Edit Assignment Page for "<%- assignment.name %>" </h2>
        </div>
        <div class="col-md-3">
            <div class="row">
                <div class="col">                    
                    <a class="btn btn-outline-dark" href="/assignment?assignid=<%= assignment._id %>">Back to Assignment Page</a>
                </div>
            </div>
            <br>
        </div>        
    </div>
    <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-9">
            <div class="row">
                <div class="col">
                    <h5>Upload Specs</h5>
                    <form action="/edit-assignment/specs" method="POST" enctype="multipart/form-data">                                               
                        <div class="input-group">
                            <div class="custom-file">
                                <input type="file" name="specs" class="custom-file-input" id="specs" onchange="setFilename(this, false)">
                                <label class="custom-file-label" for="specs">Choose file</label>
                            </div>
                            <div class="input-group-append">
                                <input type="hidden" name="assignid" value="<%= assignment._id %>">                            
                                <button class="btn btn-outline-secondary" type="submit">Save</button>
                            </div>
                        </div>
                        Selected file: <label id="specs-label"></label>     
                    </form>                   
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <h5>Upload Grading Script</h5>
                    <form action="/edit-assignment/grading-script" method="POST" enctype="multipart/form-data">                                               
                        <div class="input-group">
                            <div class="custom-file">
                                <input type="file" name="grading-script" class="custom-file-input" id="grading-script" onchange="setFilename(this, false)">
                                <label class="custom-file-label" for="grading-script">Choose file</label>
                            </div>
                            <div class="input-group-append">
                                <input type="hidden" name="assignid" value="<%= assignment._id %>">                            
                                <button class="btn btn-outline-secondary" type="submit">Save</button>
                            </div>
                        </div>
                        Selected file: <label id="grading-script-label"></label>      
                    </form>                                      
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <h5>Upload Test Cases</h5>
                    <form action="/edit-assignment/test-cases" method="POST" enctype="multipart/form-data">                                               
                        <div class="input-group">
                            <div class="custom-file">
                                <input type="file" name="test-cases" class="custom-file-input" id="test-cases" onchange="setFilename(this, false)">
                                <label class="custom-file-label" for="test-cases">Choose file</label>
                            </div>
                            <div class="input-group-append">
                                <input type="hidden" name="assignid" value="<%= assignment._id %>">                            
                                <button class="btn btn-outline-secondary" type="submit">Save</button>
                            </div>
                        </div>
                        Selected file: <label id="test-cases-label"></label>    
                    </form>                                        
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <h5>Assignment Settings</h5>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="assignVisible" id="assignVisible">
                        <label class="form-check-label" for="assignVisible">
                            Students can see assignment
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="studentPregrade" id="studentPregrade">
                        <label class="form-check-label" for="studentPregrade">
                            Students can pregrade assignment
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="studentViewTests" id="studentViewTests">
                        <label class="form-check-label" for="studentViewTests">
                            Students can view test cases
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="gradeOnSubmission" id="gradeOnSubmission">
                        <label class="form-check-label" for="gradeOnSubmission">
                            Assignments are graded upon submission 
                            (otherwise, submission must be manually triggered by the instructor from the assignment page)
                        </label>
                    </div>
                    <br>
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <h5>
                        <a data-toggle="collapse" href="#advanced" role="button" aria-expanded="false" aria-controls="collapseExample">
                            Advanced <!-- expandable, TODO: fill in action -->
                            <i class="material-icons">keyboard_arrow_down</i>
                        </a>
                    </h5>
                    
                    <!-- This is for instructors to upload makefiles, etc. -->   
                    <div class="collapse" id="advanced"> 
                        <h6>Upload files for grading environment</h6><br>
                        <h6>Upload Docker File</h6>   
                        <form action="/edit-assignment/dockerfile" method="POST" enctype="multipart/form-data">                           
                            <div class="input-group">
                                <div class="custom-file">
                                    <input type="file" name="dockerfile" class="custom-file-input" id="dockerfile" onchange="setFilename(this, false)">
                                    <label class="custom-file-label" for="dockerfile">Choose dockerfile</label>
                                </div>
                                <div class="input-group-append">
                                    <input type="hidden" name="assignid" value="<%= assignment._id %>">                                        
                                    <button class="btn btn-outline-secondary" type="submit">Save</button>
                                </div>
                            </div>
                            Selected file: <label id="makefile-label"></label>     
                        </form>
                        <br>
                        <h6>Upload Makefile</h6>                           
                        <form action="/edit-assignment/makefile" method="POST" enctype="multipart/form-data">                           
                            <div class="input-group">
                                <div class="custom-file">
                                    <input type="file" name="makefile" class="custom-file-input" id="makefile" onchange="setFilename(this, false)">
                                    <label class="custom-file-label" for="makefile">Choose makefile</label>
                                </div>
                                <div class="input-group-append">
                                    <input type="hidden" name="assignid" value="<%= assignment._id %>">                                        
                                    <button class="btn btn-outline-secondary" type="submit">Save</button>
                                </div>
                            </div>
                            Selected file: <label id="makefile-label"></label>     
                        </form>                                                              
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
</div>
<br>
<script src="/js/file-ui.js"></script>

<%- include partials/footer.ejs %>
