<%- include partials/header.ejs %>
<head>
    <link rel="stylesheet" type="text/css" href="/css/assignment.css">    
</head>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-3"></div>        
        <div class="col-md-6">
            <h2> Assignment Page for "<%- assignment.name %>" </h2>
        </div>
        <div class="col-md-3">
            <% if (instructor) { %> 
                <div class="row">
                    <div class="col">                    
                        <a class="btn btn-outline-dark" href="/edit-assignment?assignid=<%= assignment._id %>">Edit Assignment</a>
                    </div>
                </div>
                <br>
            <% } %>
        </div>        
    </div>
    <div class="row">
        <div class="col-8 scroll-col">
            <h4 class="text-center">Submission</h3>
            
            <!--
                    I don't really like this drag and drop library. Its css doesn't seem to play well with bootstrap either. I also dislike how it uploads automatically. 
                    Let's keep it simple for now. 
            -->
            <!-- <div class="row">
                <div class="col">                
                    <h5>Submit project file(s)</h5>
                    <form class="box text-center" method="POST" action="/assignment/upload" enctype="multipart/form-data">
                        <div class="box__input">
                            <input class="box__file" type="file" name="files" id="file" data-multiple-caption="{count} files selected" multiple />
                            <label for="file"><strong>Choose a file</strong><span class="box__dragndrop"> or drag it here</span>.</label>
                            <br><button class="btn btn-primary" type="submit">Upload</button>
                        </div>
                        <div class="box__uploading">Uploading&hellip;</div>
                        <div class="box__success">Done!</div>
                        <div class="box__error">Error! <span></span>.</div>
                    </form>
                </div>
            </div> -->
            <br>
            <form action="/assignment" method="POST" enctype="multipart/form-data">
                <div class="input-group">
                    <div class="custom-file">
                        <input type="file" name="submission" class="custom-file-input" id="submission" onchange="setFilename(this, false)">
                        <label class="custom-file-label" for="submission">Choose file</label>
                    </div>
                    <div class="input-group-append">
                        <input type="hidden" name="assignid" value="<%= assignment._id %>">
                        <button class="btn btn-outline-secondary" type="submit">Save</button>
                    </div>
                </div>
                Selected file: <label id="submission-label"></label> 
            </form>


            <br>

            <div class="row">
                <div class="col">                            
                    <h5>View test cases</h5>
                    <!-- TODO -->
                </div>
            </div>
            
            <div class="row">
                <div class="col">                
                    <h5>Run test script</h5>
                    <!-- TODO -->                    
                </div>
            </div>
            
            <div class="row">
                <div class="col">                                
                    <h5>Run grading script</h5>
                    <!-- TODO -->                    
                </div>
            </div>
            
            </div>
            
            <% if (locals.assignment.spec && locals.assignment.spec.path) { %>
                    <iframe class="spec col scroll-col off-white-bg" src="<%= assignment.spec.path %>" frameborder="0"></iframe>
            <% } %>
            </div>
        </div>

<script src="/js/file-ui.js"></script>        
        
<%- include partials/footer.ejs %>
        